SUPPORTED_LANGUAGES = {"en", "hi", "ta", "te", "bn"}


LOCALIZED_TEXT = {
    "en": {
        "disclaimer": "This is preliminary health guidance, not a doctor replacement.",
        "critical_header": "⚠️ Critical symptoms detected.",
        "critical_body": "Please contact emergency services or visit the nearest health center immediately.",
        "critical_steps_1": "Call local emergency support (ambulance/108).",
        "critical_steps_2": "Do not delay. Reach the nearest hospital/PHC now.",
        "critical_steps_3": "Carry any current prescriptions and patient records.",
        "no_info": "I do not have enough verified information for this specific question.",
        "no_info_step_1": "Consult an ASHA worker, ANM, or a licensed doctor.",
        "no_info_step_2": "Use eSanjeevani or a nearby PHC for clinical advice.",
        "grounded_intro": "Based on verified health resources:",
        "follow_up": "If symptoms worsen or persist, seek in-person medical care.",
    },
    "hi": {
        "disclaimer": "यह प्रारंभिक स्वास्थ्य मार्गदर्शन है, डॉक्टर का विकल्प नहीं।",
        "critical_header": "⚠️ गंभीर लक्षण पाए गए हैं।",
        "critical_body": "कृपया तुरंत आपातकालीन सेवा से संपर्क करें या नज़दीकी स्वास्थ्य केंद्र जाएं।",
        "critical_steps_1": "स्थानीय आपातकालीन सहायता (एम्बुलेंस/108) पर कॉल करें।",
        "critical_steps_2": "देरी न करें। तुरंत नज़दीकी अस्पताल/PHC जाएं।",
        "critical_steps_3": "चल रही दवाइयों और मेडिकल रिकॉर्ड साथ लें।",
        "no_info": "इस प्रश्न के लिए मेरे पास पर्याप्त सत्यापित जानकारी नहीं है।",
        "no_info_step_1": "ASHA कार्यकर्ता, ANM या पंजीकृत डॉक्टर से सलाह लें।",
        "no_info_step_2": "क्लिनिकल सलाह के लिए eSanjeevani या नज़दीकी PHC का उपयोग करें।",
        "grounded_intro": "सत्यापित स्वास्थ्य स्रोतों के आधार पर:",
        "follow_up": "लक्षण बढ़ें या बने रहें तो व्यक्तिगत रूप से डॉक्टर से मिलें।",
    },
    "ta": {
        "disclaimer": "இது தொடக்கநிலை சுகாதார வழிகாட்டல்; மருத்துவருக்குப் பதிலல்ல.",
        "critical_header": "⚠️ ஆபத்தான அறிகுறிகள் கண்டறியப்பட்டன.",
        "critical_body": "உடனே அவசர சேவையை தொடர்புகொள்ளவும் அல்லது அருகிலுள்ள மருத்துவமனைக்கு செல்லவும்.",
        "critical_steps_1": "உள்ளூர் அவசர உதவிக்கு (ஆம்புலன்ஸ்/108) அழைக்கவும்.",
        "critical_steps_2": "தாமதிக்காமல் அருகிலுள்ள மருத்துவமனை/PHC-க்கு செல்லவும்.",
        "critical_steps_3": "பயன்பாட்டில் உள்ள மருந்து மற்றும் மருத்துவ பதிவுகளை எடுத்துச் செல்லவும்.",
        "no_info": "இந்த கேள்விக்கான உறுதி செய்யப்பட்ட தகவல் போதுமானதாக இல்லை.",
        "no_info_step_1": "ASHA பணியாளர், ANM அல்லது தகுதி பெற்ற மருத்துவரிடம் ஆலோசிக்கவும்.",
        "no_info_step_2": "eSanjeevani அல்லது அருகிலுள்ள PHC மூலம் ஆலோசனை பெறவும்.",
        "grounded_intro": "உறுதி செய்யப்பட்ட சுகாதார ஆதாரங்களின் அடிப்படையில்:",
        "follow_up": "அறிகுறிகள் நீடித்தால் நேரடியாக மருத்துவரை அணுகவும்.",
    },
    "te": {
        "disclaimer": "ఇది ప్రాథమిక ఆరోగ్య మార్గదర్శకం మాత్రమే; వైద్యుడికి ప్రత్యామ్నాయం కాదు.",
        "critical_header": "⚠️ అత్యవసర లక్షణాలు గుర్తించబడ్డాయి.",
        "critical_body": "దయచేసి వెంటనే అత్యవసర సేవలను సంప్రదించండి లేదా సమీప ఆరోగ్య కేంద్రానికి వెళ్లండి.",
        "critical_steps_1": "స్థానిక అత్యవసర సేవ (అంబులెన్స్/108)కు కాల్ చేయండి.",
        "critical_steps_2": "ఆలస్యం చేయకుండా సమీప ఆసుపత్రి/PHC కి వెళ్లండి.",
        "critical_steps_3": "ప్రస్తుతం వాడుతున్న మందులు మరియు రికార్డులు వెంట తీసుకెళ్లండి.",
        "no_info": "ఈ ప్రశ్నకు సరిపడిన ధృవీకరించిన సమాచారం నాకు లేదు.",
        "no_info_step_1": "ASHA వర్కర్, ANM లేదా లైసెన్స్ ఉన్న వైద్యుడిని సంప్రదించండి.",
        "no_info_step_2": "క్లినికల్ సలహా కోసం eSanjeevani లేదా సమీప PHC ను ఉపయోగించండి.",
        "grounded_intro": "ధృవీకరించిన ఆరోగ్య వనరుల ఆధారంగా:",
        "follow_up": "లక్షణాలు కొనసాగితే ప్రత్యక్ష వైద్య సహాయం పొందండి.",
    },
    "bn": {
        "disclaimer": "এটি প্রাথমিক স্বাস্থ্য সহায়তা, ডাক্তারের বিকল্প নয়।",
        "critical_header": "⚠️ গুরুতর উপসর্গ শনাক্ত হয়েছে।",
        "critical_body": "দয়া করে দ্রুত জরুরি পরিষেবায় যোগাযোগ করুন বা নিকটস্থ স্বাস্থ্যকেন্দ্রে যান।",
        "critical_steps_1": "স্থানীয় জরুরি নম্বরে (অ্যাম্বুলেন্স/১০৮) ফোন করুন।",
        "critical_steps_2": "দেরি না করে নিকটস্থ হাসপাতাল/PHC-তে যান।",
        "critical_steps_3": "চলমান ওষুধ ও চিকিৎসা নথি সঙ্গে নিন।",
        "no_info": "এই প্রশ্নের জন্য আমার কাছে পর্যাপ্ত যাচাই করা তথ্য নেই।",
        "no_info_step_1": "ASHA কর্মী, ANM বা নিবন্ধিত ডাক্তারের পরামর্শ নিন।",
        "no_info_step_2": "ক্লিনিকাল পরামর্শের জন্য eSanjeevani বা নিকটস্থ PHC ব্যবহার করুন।",
        "grounded_intro": "যাচাইকৃত স্বাস্থ্য উৎসের ভিত্তিতে:",
        "follow_up": "উপসর্গ বাড়লে বা থাকলে সরাসরি চিকিৎসা নিন।",
    },
}


def normalize_language(language: str | None) -> str:
    if not language:
        return "en"
    code = language.strip().lower()
    if "-" in code:
        code = code.split("-", maxsplit=1)[0]
    return code if code in SUPPORTED_LANGUAGES else "en"


def t(language: str, key: str) -> str:
    lang = normalize_language(language)
    if key in LOCALIZED_TEXT[lang]:
        return LOCALIZED_TEXT[lang][key]
    return LOCALIZED_TEXT["en"].get(key, key)

